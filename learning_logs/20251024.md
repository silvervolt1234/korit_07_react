# Movie Card Board

https://yts.mx/api/v2/list_movies.json?minimum_rating=8.8&sort_by=year

의 링크를 확인해 영화 정보를 JSON으로 분석하고 개발자가 생각했을때 사용자에게 필요한 경보를 브라우저에 표시

```jsx
// main.jsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.jsx'
import { BrowserRouter } from 'react-router-dom'

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <BrowserRouter>
      <App />
    </BrowserRouter>
  </React.StrictMode>,
)



// Home.jsx
import { useState, useEffect } from "react"
import Movie from "../components/Movie"

function Home() {
  const [ isLoading, setLoading ] = useState(true);
  const [ movies, setMovies ] = useState([]);

  const getMovies = async () => {
    const response = await fetch('https://yts.mx/api/v2/list_movies.json?minimum_rating=8.8&sort_by=year');
    const json = await response.json();
    setMovies(json.data.movies);
    setLoading(false)
  }

  useEffect(() => {
    getMovies();
  }, []);

  return(
    <div className="home-container">
      {
        isLoading ? (
          <h1 className="home-loading">로딩 중.......</h1>
        ) : (
          <div className="movie-grid"> 
            {
              movies.map(movie => (
                <Movie 
                  key={movie.id}
                  id={movie.id}
                  coverImg={movie.medium_cover_image}
                  summary={movie.summary}
                  genres={movie.genres}
                />
              ))
            }
          </div>
        )
      }
    </div>
  )
}

export default Home



// movie.jsx
import { Link } from "react-router-dom"

function Movie({ id, coverImg, title, summary, genres}) {
  return(
  <div className="movie-card">
    <Link to={`/movie/${id}`}>
      <img src={coverImg} alt="title" />
    </Link>
    <div className="movie-card-title">
      <Link to={`/movie/${id}`}>{title}</Link>
    </div>
    <ul className="movie-card-genres">
      {genres.map(genre => (
        <li key={genre}>{genre}</li>
      ))}
    </ul>
  </div>
);

}

export default Movie
```
현재까지의 상황에서 실행 가능한건 fetch를 통해서 JSON 파일에 movies 배열의 결과값들을 movies[]에 저장했다는 점. 그리고 movies.map()을 통해 각각의 movie element를 `<Movie>`를 통해서 작동

중요한 점은 Home 컴포넌트에서 Movie 컴포넌트로 props drilling이 이루어졌다는 점. `<Movie>` 컴포넌트 내에서는 객체 구조분해를 통해 props라는 접두어를 달지 않고 값들을 불러냄

여기서 생각가능한 건 각 Movie들의 세부 페이지로 들어가는 방법으로 세부페이지에 다시 fetch가 이루어져야 하는데 Home에서 props drilling으로 이루어진 값을 다시 Detail로 props drilling 필요

또한 carfront의 예시처럼 특정 이미지나 제목을 클릭시 setOpen(true)를 통해 모달을 띄우거나 페이지가 넘어가는걸 해야 하는데 props drilling으로 받은 속성과 Detail컴포넌트 내의 새로 선언해야 하는 상태 등이 많아져 복잡하게 된다

두 번쨰 방법으로는 이미지나 제목을 클릭시 엔드포인트로 변동을 이러나는 방법으로 Routes - Router를 활용해 특정 엔드포인트일 때 특정 컴포넌트를 불러오는 react-router-dom을 활용 가능

그래서 두 번째 방법을 통한 세부 페이지 구현
```jsx
// detail.jsx
import { useState, useEffect } from "react";
import { useParams } from "react-router-dom";

function Detail() {
  const { id } = useParams();
  const [ loading, setLoading ] = useState(true);
  const [ movie, setMovie ] = useState(null);

  const getMovie = async () => {
    try {
      const response = await fetch(`https://yts.mx/api/v2/movie_details.json?movie_id=${id}`)
      const json = await response.json();
      setMovie(json.data.movie);
      setLoading(false);
    } catch (err) {
      console.log('영화 정보 불러오는 중 오류 발생', err)
    }
  };

  useEffect(() => {
    getMovie();
  }, [id]);    // id 값이 변할때마다 재렌더링

  if(loading) {
    return <div className="detail-loading">영화 정보를 불러오는 중 ... </div>
  }

  if(!movie) {
    return <div className="detail-error">해당 ID의 영화 정보를 찾을 수 없습니다.</div>
  }

  return (
    <div className="detail-container">
      <div
        className="detail-backdrop"
        style={{
          backgroundImage: `url(${movie.background_image_original})`,
        }}
      >
        <div className="detail-overlay">
          <div className="detail-content">
            <img 
              className="detail-poster"
              src={movie.large_cover_image}
              alt={movie.title} 
            />
            <div className="detail-info">
              <h1 className="detail-title">{movie.title}</h1>
              <p className="detail-meta">
                {movie.rating}점 / {movie.runtime}분
              </p>
              <div className="detail-genres">
                {movie.genres.map(g => (
                  <span key={g} className="detail-genre">{
                    g}
                  </span>
                ))}
              </div>
              <p className="detail-description">{movie.description_full}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}

export default Detail
```