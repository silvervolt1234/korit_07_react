## 코드 리팩초링 관련
현재 New Car 버튼을 클릭했을 때 Modal이 나오며 빈 input 태그들이 뜨는데 여기에 정보를 입력할 수 있는 상태

그런데 각 row의 마지막 컬럼으로 Edit 버튼을 추가해 일부 수정을 가능하게끔 할 예정. 그리고 이때도 Modal이 뜨게 할 것

그러면 New Car에서 사용하는 Modal을 Edit에도 동일하게 사용 가능한데 예를 들어 블로그를 작성할때 새로 발행하기만 하면 빈 양식으로 뜨지만 수정하기에서는 같은 양식에 내용이 그대로 나오는 것

components 폴더 내에 CarDialogContent.tsx를 생성  

```tsx
import { ChangeEvent } from "react";
import { Car } from "../types";

type DialogFormProps = {
  car: Car;
  handleChange: (event: ChangeEvent<HTMLInputElement>) => 
    void;
}

function CarDialogContent({car, handleChange} : DialogFormProps) {
  return(<></>)
}

export default CarDialogContent
```
현재 CarDialogContent 컴포넌트를 초기화한 상황으로 현 목표는 New Car 폼의 TextField를 렌더링하는 새 컴포넌트를 만들어 Edit 폼에도 사용. 그래서 TextField에 해당하는 자체 컴포넌트로 만들기 위해 CarDialogContent를 새로 생성. 그리고 props를 이용해 컴포넌트에 car 객체와 handleChange 함수를 전달 필요(AddCar 컴포넌트에 정의). 이를 위해서 DialogFormProps type을 정의. 이걸 type.ts로 분리하지 않은 이유는 이걸 Edit에 쓸지 안 쓸지 정하지 않았기 때문

## 수정 기능 추가
Edit 버튼의 경우 위치가 New Car와 동일해서는 안되는데 {id}에 맞는 부분을 수정해야하기에 각 row마다 Edit 버튼을 추가

```tsx
import { ChangeEvent, useState } from "react"
import { Car, CarResponse } from "../types"
import { Dialog, DialogActions, DialogTitle } from "@mui/material";
import CarDialogContent from "./CarDialogContent";

type FormProps = {
  cardata: CarResponse
}

function EditCar({cardata}: FormProps) {
  const [ open, setOpen ] = useState(false);
  const [ car, setCar ] = useState<Car>({
    brand: '',
    model: '',
    color: '',
    registrationNumber: '',
    modelYear: 0,
    price: 0
  });

  const handleClickOpen = () => {
    // Modal이 열릴 때 특정 id 값에 맞는 정보를 불러오길 원해서 AddCar의 handleClickOpen()과 코드라인의 차이 발생
    setCar({
      brand: cardata.brand,
      model: cardata.model,
      color: cardata.color,
      registrationNumber: cardata.registrationNumber,
      modelYear: cardata.modelYear,
      price: cardata.price
    });
    setOpen(true);
  }

  const handleClickClose = () => {
    setOpen(false);
  }

  const handleSave = () => {
    setOpen(false);
  }

  // AddCar.tsx의 것을 사용
  const handleChange = (event: ChangeEvent<HTMLInputElement>) => {
    setCar({...car, [event.target.name]: event.target.value});
  }

  return(
    <>
      <button onClick={handleClickOpen}>
        Edit
      </button>
      <Dialog open={open} onClose={handleClickClose}>
        <DialogTitle>Edit Car</DialogTitle>
        <CarDialogContent car={car} handleChange={handleChange}/>
        <DialogActions>
          <button onClick={handleSave}>Save | 저장</button>
          <button onClick={handleClickClose}>Cancel | 취소</button>
        </DialogActions>
      </Dialog>
    </>
  )
}

export default EditCar
```

이상의 EditCar 컴포넌트를 Carlist 컴포넌트에 집어넣었는데 특정 id값을 받아내기 위해서 GridColDef 부분에 새로 컬럼 정의를 해주고 renderCell로 이상의 컴포넌트를 불러냄

이 부분까지 frontend상에서 edit 버튼이 생기고 그걸 클릭하면 Modal 창이 뜨게 구현된 상태. 그 모달 창은 CarDialogContent 컴포넌트고 AddCar에서 사용한것과 동일하기에 컴포넌트가 재사용성이 있다는걸 확인 가능

차이점은 각각의 input 태그 내에 AddCar 컴포넌트는 전부 값이 비워져있던 반면 EditCar는 어떤 row를 클릭했냐에 따라 값이 서로 다르게 input 태그에 삽입된 상태

이는 마찬가지로 renderCell이 (params)를 매개변수로 가지기 때문. params.row를 하면 테이블 내의 각 row들을 지칭

앞으로 고려할건 브라우저 상에서 수정된 자동차 정보를 백엔드로 보내야한다는 점. http://localhost:8080/api/cars/{id} 로 PUT 요청을 보내게 되어 링크 삭제시 href 값을 가져왔기에 동일한 기능임을 알수 있고 차이점은 deleCar()는 id 값만 보냄녀 되는 반면 updateCar()는 수정할 id 값과 수정 내용이 전달되어야 하기 때문에 매개변수 달라짐. 이 부분은 backend에서의 CarContoller를 확인(cardatabase4 기준)

현재 요청은 내용이 필요해서 addCar()과 마찬가지로 'Content-Type':'application/json' headers가 필요

새로운 자료형을 추가
```tsx
export type CarEntity = {
  car: Car;
  url: string;
}
```
이후 carapi.ts에서 함수를 생성해 export시키고 그 함수는 EditCar 컴포넌트에서 사용 예정

```ts
// carapi.ts
export const updateCar = async (carEntity: CarEntity): Promise<CarResponse> => {
    const response = await axios.put(carEntity.url, carEntity.car, {
        headers: {
            'Content-Type': 'application/json'
        },
    });
    return response.data;
}
```

이상의 코드는 addCar() 함수와 비슷한 부분들이 있는데 하지만 axios.put() 요청에서의 첫 번째 argument가 변수를 통해서 불러와진다는 점에서 차이 존재. 왜냐하면 애초에 차량 정보가 DB에 저장되어있기 때문에 endpoint가 id 값까지 생성되어있고 그래서 이걸 삭제할 때 alert()를 통해 href 값을 가지고 올 수 있다는 점을 확인. 그래서 `${import.meta.env.VITE_API_URL}/api/cars/${carEntity.id}`의 식으로 작성할 필요 x

## CSV 데이터 내보내기
MUI 데이터 그리드에서 CSV(Comma Seperated Values) 데이터 내보내기 기능을 지원하기 때문에 추가 라이브러리의 설치 필요 x

데이터 그리드에서 가지고 올거라고 했기에 기본적으로 Carlist 컴포넌트에서 작성할 것

보존아 x-data-grid가 7 버전 이후부터는 GridToolBar를 지원하지 않기 때문에 패키지 삭제 필요

터미널에서 `npm uninstall @mui/x-data-grid` 이후 `npm install @mui/x-data-grid@6.16.2`로 재설치

# MUI 활용 프론트엔드 꾸미기
1. Button 컴포넌트            - AddCar / EditCar 컴포넌트의 button을 Button으로
2. TextField 컴포넌트
3. Icon / IconButton 컴포넌트

icon 도입을 위해 `npm install @mui/icons-material@5.17.1` 실행. 이상의 icon 패키지는 Delete 버튼을 아이콘 버튼 형태로 쓰기 위함. 아이콘의 종류가 많으니 레퍼런스 참고용 사이트 : https://mui.com/material-ui/material-icons

여기서 import할만한 아이콘 목록을 참고해 도입